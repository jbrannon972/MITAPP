/*
 * AGGRESSIVE Theme Fixes - Override EVERYTHING
 * No more white/light backgrounds ANYWHERE
 */

/* ============================================
   NUCLEAR OPTION - Override ALL Backgrounds
   ============================================ */

/* Override ALL possible light background selectors */
*[style*="background: #f"],
*[style*="background: #F"],
*[style*="background:#f"],
*[style*="background:#F"],
*[style*="background-color: #f"],
*[style*="background-color:#f"],
*[style*="background: white"],
*[style*="background: White"],
*[style*="background-color: white"] {
    background: var(--surface-color) !important;
    background-color: var(--surface-color) !important;
}

/* ============================================
   NUCLEAR MODAL FIX - FORCE CORRECT DISPLAY
   Hard-coded colors to bypass any CSS variable issues
   ============================================ */

/* Modal overlay - dark semi-transparent background */
.modal-overlay,
.modal-overlay.active,
div.modal-overlay,
.modal-overlay[class] {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: rgba(0, 0, 0, 0.7) !important;
    background-color: rgba(0, 0, 0, 0.7) !important;
    backdrop-filter: blur(4px) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 1000 !important;
    padding: 20px !important;
}

/* Modal container - centered popup box with HARD-CODED charcoal background */
.modal,
.modal-overlay .modal,
.modal-overlay > .modal,
.modal.modal-lg,
.modal-lg,
.modal[class],
div.modal,
div.modal[class] {
    background: #2d2d30 !important;
    background-color: #2d2d30 !important;
    color: #ececec !important;
    position: relative !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5) !important;
}

/* Desktop: Centered modal popup - CRITICAL FOR PREVENTING FULLSCREEN */
@media (min-width: 769px) {
    .modal,
    .modal[class],
    div.modal,
    .modal-overlay .modal,
    .modal-overlay > .modal {
        width: 90% !important;
        max-width: 600px !important;
        min-width: 400px !important;
        height: auto !important;
        max-height: 90vh !important;
        border-radius: 12px !important;
        margin: auto !important;
    }

    .modal.modal-lg,
    .modal-lg[class],
    .modal-overlay .modal.modal-lg,
    .modal-overlay > .modal.modal-lg {
        max-width: 900px !important;
    }
}

/* Mobile: Fullscreen modal */
@media (max-width: 768px) {
    .modal,
    .modal[class],
    div.modal,
    .modal-overlay .modal {
        width: 100% !important;
        height: 100% !important;
        max-width: none !important;
        max-height: none !important;
        border-radius: 0 !important;
    }
}

/* Modal header - HARD-CODED charcoal */
.modal-header,
.modal .modal-header,
.modal-header[class],
div.modal .modal-header,
.modal-overlay .modal .modal-header {
    background: #3e3e42 !important;
    background-color: #3e3e42 !important;
    color: #ececec !important;
    border-bottom: 1px solid #454549 !important;
    padding: 20px 24px !important;
    flex-shrink: 0 !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
}

.modal-header h3,
.modal-header h3 i,
.modal-header[class] h3,
.modal .modal-header h3 {
    color: #ececec !important;
    margin: 0 !important;
}

/* Modal body - HARD-CODED charcoal */
.modal-body,
.modal .modal-body,
.modal-body[class],
div.modal .modal-body,
.modal-overlay .modal .modal-body {
    background: #2d2d30 !important;
    background-color: #2d2d30 !important;
    color: #ececec !important;
    padding: 24px !important;
    overflow-y: auto !important;
    flex-grow: 1 !important;
}

.modal-body form,
.modal-body .form-group,
.modal-body label,
.modal-body p,
.modal-body span {
    color: #ececec !important;
    background: transparent !important;
    background-color: transparent !important;
}

/* Modal footer - HARD-CODED charcoal */
.modal-footer,
.modal .modal-footer,
.modal-footer[class],
div.modal .modal-footer,
.modal-overlay .modal .modal-footer {
    background: #3e3e42 !important;
    background-color: #3e3e42 !important;
    border-top: 1px solid #454549 !important;
    padding: 20px 24px !important;
    flex-shrink: 0 !important;
    display: flex !important;
    justify-content: flex-end !important;
    gap: 12px !important;
}

.modal-close:hover,
.modal-tab-btn:hover {
    background: #2d2d30 !important;
    background-color: #2d2d30 !important;
}

.modal-tab-btn:disabled {
    background: #1a1a1a !important;
    background-color: #1a1a1a !important;
}

/* Fix toggle switches in modals */
.modal .toggle-switch {
    background: var(--background-color) !important;
}

.modal .toggle-switch input:checked + .slider {
    background-color: var(--primary-color) !important;
}

/* Fix form groups and inputs in modals */
.modal .form-group {
    background: transparent !important;
    background-color: transparent !important;
}

.modal .form-input,
.modal .form-control,
.modal input[type="text"],
.modal input[type="email"],
.modal input[type="date"],
.modal input[type="number"],
.modal input[type="checkbox"],
.modal select,
.modal textarea {
    background: var(--background-color) !important;
    background-color: var(--background-color) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}

.modal .form-input:focus,
.modal .form-control:focus,
.modal input:focus,
.modal select:focus,
.modal textarea:focus {
    border-color: var(--primary-color) !important;
    outline: none !important;
    background: var(--background-color) !important;
}

/* Fix ALL sub-nav and tab backgrounds */
.sub-nav,
.tab-header .sub-nav,
.calendar-view-switcher,
.tab-controls {
    background: var(--surface-color) !important;
    background-color: var(--surface-color) !important;
}

.sub-nav-btn,
.calendar-view-switcher .btn {
    background: transparent !important;
    background-color: transparent !important;
}

.sub-nav-btn.active,
.calendar-view-switcher .btn.active {
    background: var(--background-color) !important;
    background-color: var(--background-color) !important;
}

/* Fix ALL card-related backgrounds */
.card,
.metric-card,
.stat,
.zone-card,
.tech-card,
.job-card,
.route-card,
.vehicle-card,
.tech-calendar-card,
.warehouse-fleet-card,
.tech-team-card {
    background: var(--surface-color) !important;
    background-color: var(--surface-color) !important;
}

/* Fix ALL item backgrounds */
.stat-item,
.breakdown-section,
.glance-item,
.staff-off-item,
.tech-item,
.recurring-tech-item,
.view-staff-item,
.zone-member,
.tech-list-item {
    background: var(--background-color) !important;
    background-color: var(--background-color) !important;
}

.stat-item:hover,
.recurring-tech-item:hover,
.view-staff-item:hover,
.tech-item:hover {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
}

/* Fix ALL table hover states */
.calendar-table td:hover,
.data-table tr:hover,
tr:hover {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
}

/* Fix ALL header backgrounds */
.card-header,
.zone-header,
.tech-card-header,
.modal-header,
.kanban-column-header,
.week-day-header,
.rule-header {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
}

/* Fix calendar status backgrounds to be subtle */
.staff-on,
.status-on,
.staff-compact.staff-on {
    background: rgba(16, 185, 129, 0.12) !important;
    background-color: rgba(16, 185, 129, 0.12) !important;
}

.staff-off,
.status-off,
.staff-compact.staff-off {
    background: rgba(248, 123, 77, 0.12) !important;
    background-color: rgba(248, 123, 77, 0.12) !important;
}

.staff-sick,
.status-sick,
.staff-compact.staff-sick {
    background: rgba(239, 68, 68, 0.12) !important;
    background-color: rgba(239, 68, 68, 0.12) !important;
}

.staff-vacation,
.status-vacation,
.staff-compact.staff-vacation {
    background: rgba(59, 130, 246, 0.12) !important;
    background-color: rgba(59, 130, 246, 0.12) !important;
}

.staff-no-call-no-show,
.status-no-call-no-show {
    background: rgba(107, 114, 128, 0.12) !important;
    background-color: rgba(107, 114, 128, 0.12) !important;
}

.staff-custom-hours {
    background: rgba(245, 158, 11, 0.12) !important;
    background-color: rgba(245, 158, 11, 0.12) !important;
}

/* Fix day selector and other form backgrounds */
.day-selector,
.form-section,
.form-group-row {
    background: var(--surface-color) !important;
    background-color: var(--surface-color) !important;
}

/* Fix notes backgrounds */
.view-notes,
.dashboard-notes {
    background: rgba(248, 123, 77, 0.08) !important;
    background-color: rgba(248, 123, 77, 0.08) !important;
}

/* Fix kanban backgrounds */
.kanban-column,
.kanban-board {
    background: var(--surface-color) !important;
    background-color: var(--surface-color) !important;
}

.kanban-column-body {
    background: var(--background-color) !important;
    background-color: var(--background-color) !important;
}

/* Fix more indicator and other misc backgrounds */
.more-indicator {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
}

/* ============================================
   SIMPLIFY JOB STATS - Remove Sub-Boxes
   ============================================ */

/* Make Job Stats a compact 2-column grid */
#todays-stats-content .stats-grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 6px 12px !important;
    padding: 8px !important;
    background: transparent !important;
}

#todays-stats-content .stat-item {
    background: transparent !important;
    border: none !important;
    border-bottom: 1px solid var(--border-color) !important;
    border-radius: 0 !important;
    padding: 8px 0 !important;
    margin-bottom: 0 !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
}

#todays-stats-content .stat-item:last-child {
    border-bottom: none !important;
}

#todays-stats-content .stat-item:hover {
    background: rgba(248, 123, 77, 0.05) !important;
    transform: none !important;
    border-color: var(--primary-color) !important;
    padding-left: 4px !important;
}

#todays-stats-content .stat-label {
    font-size: 12px !important;
    font-weight: 500 !important;
    color: var(--text-primary) !important;
    text-transform: none !important;
    letter-spacing: 0 !important;
    margin-bottom: 0 !important;
}

#todays-stats-content .stat-value {
    font-size: 16px !important;
    font-weight: 700 !important;
    color: var(--primary-color) !important;
    display: inline !important;
}

#todays-stats-content .stat-value small {
    font-size: 11px !important;
    font-weight: 400 !important;
    color: var(--text-secondary) !important;
    margin-left: 6px !important;
}

/* Simplify breakdowns - 2 columns for compactness */
.breakdown-grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 12px !important;
    padding: 0 12px 12px 12px !important;
    background: transparent !important;
}

#todays-stats-content .breakdown-section {
    background: transparent !important;
    border: none !important;
    padding: 12px 0 !important;
    border-bottom: 1px solid var(--border-color) !important;
}

#todays-stats-content .breakdown-section:last-child {
    border-bottom: none !important;
}

#todays-stats-content .breakdown-section h4 {
    font-size: 11px !important;
    font-weight: 600 !important;
    color: var(--text-secondary) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    margin: 0 0 8px 0 !important;
}

#todays-stats-content .breakdown-item {
    padding: 4px 0 !important;
    border-bottom: none !important;
    background: transparent !important;
}

#todays-stats-content .breakdown-item:hover {
    padding-left: 4px !important;
    background: rgba(248, 123, 77, 0.05) !important;
}

/* ============================================
   FIX TEAM PAGE - COMPLETE BACKGROUND OVERHAUL
   ============================================ */

/* Fix zone cards */
.zone-card {
    background: var(--surface-color) !important;
    background-color: var(--surface-color) !important;
}

.zone-header {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
}

.zone-lead {
    background: var(--background-color) !important;
    background-color: var(--background-color) !important;
    color: var(--text-primary) !important;
}

.zone-lead span,
.zone-lead i {
    color: var(--text-primary) !important;
}

.zone-lead:hover {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
}

/* Fix zone members */
.zone-members {
    background: transparent !important;
    background-color: transparent !important;
}

.member-card {
    background: var(--background-color) !important;
    background-color: var(--background-color) !important;
    color: var(--text-primary) !important;
}

.member-card:hover {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
}

.member-details {
    background: transparent !important;
    background-color: transparent !important;
}

.member-name {
    color: var(--text-primary) !important;
}

.member-role {
    color: var(--text-secondary) !important;
}

.zone-stats {
    background: var(--surface-hover) !important;
    background-color: var(--surface-hover) !important;
    color: var(--text-secondary) !important;
}

.zone-stats span {
    color: var(--text-secondary) !important;
}

/* Fix tech card variations */
.tech-card {
    background: var(--surface-color) !important;
}

.tech-card-header {
    background: var(--surface-hover) !important;
}

.tech-list {
    background: transparent !important;
    padding: 0 !important;
}

.tech-list-item,
.zone-member {
    background: var(--background-color) !important;
    margin: 0 12px 6px 12px !important;
    padding: 10px 12px !important;
    border-radius: 6px !important;
}

.tech-list-item:hover,
.zone-member:hover {
    background: var(--surface-hover) !important;
    cursor: pointer !important;
}

/* Hide ALL edit buttons - merged into name click */
.tech-actions .btn-edit,
.btn-edit,
button.btn-edit {
    display: none !important;
}

/* Fix stat cards on team page */
.stat-card {
    background: var(--surface-color) !important;
    background-color: var(--surface-color) !important;
}

.stat-card h3 {
    color: var(--text-secondary) !important;
}

.stat-number {
    color: var(--primary-color) !important;
}

/* Fix team overview */
.team-overview {
    background: transparent !important;
}

.team-stats {
    background: transparent !important;
}

/* Fix add member section */
.add-member-section {
    background: transparent !important;
    background-color: transparent !important;
}

/* ============================================
   ULTRA-COMPACT EVERYTHING
   ============================================ */

/* Even more aggressive compactness */
.card {
    margin-bottom: 10px !important;
}

.card-header {
    padding: 6px 10px !important;
}

.card-header h3 {
    font-size: 12px !important;
}

.tab-header {
    padding: 6px 10px !important;
    margin-bottom: 10px !important;
}

.dashboard-main-grid {
    gap: 10px !important;
}

.dashboard-top-grid {
    gap: 10px !important;
}

/* Compact glance */
.glance-grid-two-col {
    padding: 6px !important;
    gap: 6px !important;
}

.glance-item {
    padding: 8px 6px !important;
}

.glance-value {
    font-size: 22px !important;
    margin-bottom: 3px !important;
}

.glance-label {
    font-size: 8px !important;
    line-height: 1.2 !important;
}

/* Compact staffing */
.staffing-info-list {
    padding: 6px !important;
}

.staff-off-item {
    padding: 5px 8px !important;
    margin: 0 6px 4px 6px !important;
}

.staff-name {
    font-size: 11px !important;
}

.staff-status-badge {
    font-size: 9px !important;
    padding: 2px 6px !important;
}

/* Compact notes */
.dashboard-notes {
    padding: 6px 8px !important;
    margin: 0 6px 6px 6px !important;
    font-size: 10px !important;
}

/* Compact summary grids */
.summary-grid {
    padding: 6px !important;
    gap: 6px !important;
    grid-template-columns: 1fr !important;
}

.summary-grid > div {
    padding: 6px !important;
    margin: 0 6px !important;
}

.summary-grid h4 {
    font-size: 9px !important;
    margin-bottom: 4px !important;
}

.summary-grid li,
.summary-grid p {
    font-size: 10px !important;
}

/* Compact checklists */
.checklist-item {
    padding: 6px 8px !important;
    margin: 0 6px 4px 6px !important;
}

.checklist-item-header strong {
    font-size: 11px !important;
}

.checklist-item-header i {
    font-size: 12px !important;
}

/* Compact win/support */
.win-section,
.support-section {
    padding: 6px !important;
    margin: 0 6px 6px 6px !important;
}

.win-section h4,
.support-section h4 {
    font-size: 10px !important;
    margin-bottom: 4px !important;
}

.win-section p,
.support-section p {
    font-size: 11px !important;
}

.compact-section {
    padding: 6px !important;
}

/* ============================================
   MOBILE OVERRIDES
   ============================================ */

@media (max-width: 768px) {
    /* Stack sub-nav vertically on mobile */
    .sub-nav {
        flex-direction: row !important;
        width: 100% !important;
    }

    .sub-nav-btn {
        flex: 1 !important;
        font-size: 10px !important;
        padding: 5px 6px !important;
    }

    /* Make stats even more compact and single column on mobile */
    #todays-stats-content .stats-grid {
        padding: 8px !important;
        grid-template-columns: 1fr !important;
        gap: 4px !important;
    }

    #todays-stats-content .stat-item {
        padding: 6px 0 !important;
    }

    #todays-stats-content .stat-label {
        font-size: 11px !important;
    }

    #todays-stats-content .stat-value {
        font-size: 14px !important;
    }

    /* Compact breakdown on mobile - single column */
    .breakdown-grid {
        grid-template-columns: 1fr !important;
        gap: 8px !important;
        padding: 0 8px 8px 8px !important;
    }

    #todays-stats-content .breakdown-section {
        padding: 8px 0 !important;
    }
}

/* ============================================
   FIX APP HEADER ON MOBILE
   ============================================ */

@media (max-width: 768px) {
    .app-header,
    .tech-app-header,
    .warehouse-header {
        padding: 6px 10px !important;
        background: var(--surface-color) !important;
    }

    .app-header h1,
    .tech-app-header h1 {
        font-size: 14px !important;
    }

    .hamburger-menu {
        width: 32px !important;
        height: 32px !important;
    }
}

/* ============================================
   ROUTING PAGE FIXES
   ============================================ */

.routing-container,
.routing-page {
    background: var(--background-color) !important;
}

.kanban-board {
    background: var(--background-color) !important;
}

.kanban-column {
    background: var(--surface-color) !important;
    min-width: 260px !important;
}

.kanban-column-header {
    background: var(--surface-hover) !important;
    padding: 6px 10px !important;
}

.kanban-column-header h3 {
    font-size: 12px !important;
}

.kanban-column-body {
    background: var(--background-color) !important;
    padding: 6px !important;
}

.job-card {
    background: var(--surface-color) !important;
    padding: 6px !important;
    margin-bottom: 6px !important;
}

.job-card-header {
    font-size: 11px !important;
}

.job-card-body {
    font-size: 10px !important;
}
